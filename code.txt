const bodyTag = document.querySelector('body');

console.log(bodyTag);
const wiper = document.createElement('div');
wiper.classList.add('wiper');

const wiperImage = document.createElement('img');
wiperImage.setAttribute('src', '/assets/load.svg');

wiper.appendChild(wiperImage);
bodyTag.appendChild(wiper);

barba.init({
    debug: true,
    transitions: [
        {
            name: "next",
            leave({ current, next, trigger }) {
                return new Promise(resolve => {
                    const timeline= gsap.timeline({
                        onComplete() {
                            resolve()
                        }
                    })

                    timeline
                        .set(wiper, {x: '-100%'})
                        .to(wiper, {x: 0}, 0)
                })
            },
            beforeEnter({ current, next, trigger }) {
                return new Promise(resolve => {
                    const timeline = gsap.timeline({
                        onComplete() {
                            resolve()
                        }
                    })

                    timeline
                        .to(wiperImage, {opacity: 1})
                        .to(wiperImage, {opacity: 0, delay: 1})
                })
            },
            enter({ current, next, trigger }) { 
                return new Promise(resolve => {
                    const timeline = gsap.timeline({
                        onComplete() {
                            resolve()
                        }
                    })

                    timeline
                        .to(wiper, {x: '100%'}, 0)

                })

            },
        }
    ],
    views: [],
})
